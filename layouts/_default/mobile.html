<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- SEO Meta Tags -->
    <meta name="description" content="Download the InCheck mobile app for iOS and Android">
    <meta name="robots" content="index, follow">
    
    <!-- App Meta Tags -->
    <meta name="apple-itunes-app" content="app-id=6504193677">
    <meta name="google-play-app" content="app-id=ai.incheck.app">
    
    <!-- Fallback redirect for non-JS browsers -->
    <noscript>
        <meta http-equiv="refresh" content="1;url=https://chat.incheck.ai">
    </noscript>

    <title>InCheck Mobile App Download</title>
    <link rel="stylesheet" href="/assets/css/theme.css">

    <style>
        body { font-family: var(--font-sans); background: var(--surface); color: var(--text); text-align: center; padding: 20px; margin: 0; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .qr-container { display: flex; flex-direction: column; align-items: center; margin-top: var(--space-4); gap: var(--space-4); }
        @media (min-width: 768px) { .qr-container { flex-direction: row; justify-content: center; } }
        .qr-code { margin: 20px 0; border: 1px solid var(--border); padding: var(--space-4); background-color: #fff; border-radius: var(--radius); box-shadow: var(--shadow-sm); transition: transform 0.3s ease; }
        .qr-code:hover { transform: translateY(-5px); box-shadow: var(--shadow-md); }
        .web-app-section { max-width: 800px; margin: 20px auto; padding: var(--space-5); text-align: center; background-color: #fff; border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow-sm); }
        button { background-color: var(--brand); color: #fff; padding: 12px 24px; border: none; border-radius: var(--radius); cursor: pointer; font-size: 16px; margin: 10px; box-shadow: var(--shadow-sm); }
        button:hover { background-color: var(--brand-700); transform: translateY(-2px); box-shadow: var(--shadow-md); }
        .notice { background-color: var(--surface); border: 1px solid var(--border); color: var(--muted); padding: 15px; margin-top: 20px; border-radius: var(--radius); }
        .store-buttons { display: flex; flex-direction: column; align-items: center; gap: 10px; margin-top: 20px; }
        @media (min-width: 768px) { .store-buttons { flex-direction: row; justify-content: center; } }
        #redirecting { animation: fade 2s infinite; }
        @keyframes fade { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .error-message { display: none; color: #dc3545; margin-top: 20px; padding: 10px; border: 1px solid #dc3545; border-radius: var(--radius); }
    </style>
</head>
<body>
    <h1 id="redirecting">Redirecting to app store...</h1>
    <div id="error-message" class="error-message">
        If you're not redirected automatically, please click one of the buttons below.
    </div>

    <div id="not-available" style="display: none;">
        <h1>Mobile apps coming soon</h1>
    </div>

    <!-- Web App Section -->
    <div id="web-app-section" class="web-app-section" style="display: none;">
        <h1>Use the InCheck Web App</h1>
        <p>You can use our Web App for the best desktop experience! If you're already registered, click "Login/Chat" below.</p>
        <p>New users can click "Sign Up" to create an account. Your account works across both web and mobile platforms.</p>
        <div class="web-buttons">
            <a href="https://signup.incheck.ai" target="_blank" rel="noopener noreferrer">
                <button>Sign Up</button>
            </a>
            <a href="https://chat.incheck.ai" target="_blank" rel="noopener noreferrer">
                <button>Login/Chat</button>
            </a>
        </div>
        
        <div class="notice">
            <strong>Notice:</strong>
            <p>For the best experience, we recommend using a web browser for the initial sign-up process.</p>
        </div>
    </div>

    <div id="qr-content" class="container" style="display: none;">
        <h1>Get the InCheck App</h1>
        <p>Scan the QR code with your mobile device to download:</p>
        
        <div class="qr-container">
            <div class="qr-code">
                <h2>Apple App Store</h2>
                <img src="/assets/img/apple_qr_code.png" alt="QR code to download InCheck app from Apple App Store" width="200" height="200">
            </div>
            <div class="qr-code">
                <h2>Google Play Store</h2>
                <img src="/assets/img/android_qr_code.png" alt="QR code to download InCheck app from Google Play Store" width="200" height="200">
            </div>
        </div>

        <p>Or click to visit the app store directly:</p>
        <div class="store-buttons">
            <a href="https://apps.apple.com/us/app/intellux-ai/id6504193677" target="_blank" rel="noopener noreferrer">
                <button>Download for iOS</button>
            </a>
            <a href="https://play.google.com/store/apps/details?id=ai.intellux.app" target="_blank" rel="noopener noreferrer">
                <button>Download for Android</button>
            </a>
        </div>
    </div>

    <script>
        window.onload = function() {
            let redirectTimeout;
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            
            function showError() {
                document.getElementById('redirecting').style.display = 'none';
                document.getElementById('error-message').style.display = 'block';
            }

            function handleRedirect() {
                try {
                    if (/android/i.test(userAgent)) {
                        window.location.href = "https://play.google.com/store/apps/details?id=ai.intellux.app";
                    } else if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                        // Show web app option for iOS users since app may not be available
                        document.getElementById('redirecting').style.display = 'none';
                        document.getElementById('web-app-section').style.display = 'block';
                        document.getElementById('qr-content').style.display = 'block';
                    } else {
                        // Desktop or unknown mobile device
                        document.getElementById('qr-content').style.display = 'block';
                        document.getElementById('redirecting').style.display = 'none';
                        document.getElementById('web-app-section').style.display = 'block';
                    }
                } catch (error) {
                    showError();
                }
            }

            // Set timeout for redirect
            redirectTimeout = setTimeout(showError, 3000);

            // Attempt redirect
            handleRedirect();

            // Clear timeout if redirect successful
            window.addEventListener('beforeunload', function() {
                clearTimeout(redirectTimeout);
            });
        };
    </script>
</body>
</html>